(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e,n,t){e.exports=t.p+"static/media/Spotify_Icon_CMYK_White.d0d7f784.png"},20:function(e,n,t){e.exports=t(31)},25:function(e,n,t){},31:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(13),o=t.n(r),l=(t(25),t(3)),s=t(4),c=t(6),u=t(5),d=t(8),h=t(7),f=t(1),g=t(2),m=t(14),y=t.n(m);function p(){var e=Object(f.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    font-family: Andale Mono, monospace;\n"]);return p=function(){return e},e}function v(){var e=Object(f.a)(["\n    font-size: 18px;\n    padding-bottom: 5px;\n"]);return v=function(){return e},e}function b(){var e=Object(f.a)(["\n    font-size: 45px;\n    padding-bottom: 5px;\n"]);return b=function(){return e},e}var k=g.a.div(b()),S=g.a.div(v()),j=g.a.div(p()),x=function(e){function n(){return Object(l.a)(this,n),Object(c.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return this.props.loggedIn?i.a.createElement(j,null,i.a.createElement(k,null,"mood-sort"),i.a.createElement(S,null,"sort large, unkept playlists into smaller playlists by mood")):i.a.createElement(j,null,i.a.createElement(k,null,"mood-sort"),i.a.createElement(S,null,"sort large, unkept playlists into smaller playlists by mood"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(S,null,"log into spotify to get started"))}}]),n}(a.Component);function O(){var e=Object(f.a)(["\n  cursor: pointer;\n  background-color: #BBBEFF;\n  border-radius: 10px;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-size:  14px;\n  "]);return O=function(){return e},e}function C(){var e=Object(f.a)(["\n  cursor: pointer;\n  border-radius: 10px;\n  padding: 5px;\n  background-color: #BBBEFF;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  font-size: 14px;\n  :focus {\n    outline: none;\n  }\n"]);return C=function(){return e},e}function w(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 10px;\n  margin-right: 100px;\n"]);return w=function(){return e},e}var E=g.a.div(w()),P=g.a.select(C()),M=g.a.option(O()),F=function(e){function n(e){var t;return Object(l.a)(this,n),(t=Object(c.a)(this,Object(u.a)(n).call(this,e))).state={value:t.props.value},t.handleChange=t.handleChange.bind(Object(d.a)(t)),t}return Object(h.a)(n,e),Object(s.a)(n,[{key:"handleChange",value:function(e){this.props.handlePlaylistChange(e)}},{key:"render",value:function(){return i.a.createElement(E,null,i.a.createElement(P,{value:this.props.value,onChange:this.handleChange},i.a.createElement(M,{value:""},"Choose a Playlist"),i.a.createElement(M,{name:"liked",value:"liked"},"Liked Songs"),this.props.titles.map((function(e){return i.a.createElement(M,{name:e.name,value:e.id},e.name)}))))}}]),n}(a.Component);function I(){var e=Object(f.a)(["\n    cursor: pointer;\n    height: 20px;\n    width: 20px;\n    :hover {\n        background-color: #BBBEFF;\n    }\n"]);return I=function(){return e},e}var B=g.a.input(I()),D=function(e){var n=e.type,t=void 0===n?"checkbox":n,a=e.name,r=e.checked,o=void 0!==r&&r,l=e.onChange;return i.a.createElement(B,{type:t,name:a,checked:o,onChange:l})};function T(){var e=Object(f.a)(["\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n"]);return T=function(){return e},e}function U(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px;\n"]);return U=function(){return e},e}function W(){var e=Object(f.a)([""]);return W=function(){return e},e}var z=g.a.div(W()),H=g.a.div(U()),_=g.a.span(T()),N=function(e){function n(e){var t;return Object(l.a)(this,n),(t=Object(c.a)(this,Object(u.a)(n).call(this,e))).state={checkedItems:new Map},t.handleChange=t.handleChange.bind(Object(d.a)(t)),t}return Object(h.a)(n,e),Object(s.a)(n,[{key:"handleChange",value:function(e){this.props.handleMoodChange(e)}},{key:"render",value:function(){var e=this;return i.a.createElement(z,null,this.props.moods.map((function(n){return i.a.createElement(H,null,i.a.createElement(D,{name:n.name,checked:e.props.checkedItems.get(n.name),onChange:e.handleChange}),i.a.createElement(_,null,n.name))})))}}]),n}(i.a.Component);function A(){var e=Object(f.a)(["\n    cursor: pointer;\n    display: flex;\n    padding: 10px;\n    justify-content: center;\n    align-items: center;\n    background-color: #424FFF;\n    width: 200px;\n    border-radius: 20px;\n    color: white;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n    font-size: 16px;\n    margin-bottom: 20px;\n    :focus {\n        outline: none;\n      }\n    "]);return A=function(){return e},e}var L=g.a.button(A()),R=function(e){function n(){return Object(l.a)(this,n),Object(c.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return i.a.createElement(L,{onClick:this.props.onClick},"Sort Your Playlists!")}}]),n}(a.Component),J=t(17),Y=t.n(J);function K(){var e=Object(f.a)(["\n    display: flex;\n    padding: 10px;\n    justify-content: center;\n    align-items: center;\n    background-color: #424FFF;\n    width: 200px;\n    border-radius: 20px;\n"]);return K=function(){return e},e}function $(){var e=Object(f.a)(["\n    color: white;\n    text-decoration: none;\n    padding-left: 15px;\n"]);return $=function(){return e},e}var q=g.a.a($()),G=g.a.div(K()),Q=function(e){function n(){return Object(l.a)(this,n),Object(c.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return i.a.createElement(G,null,i.a.createElement("img",{alt:"spotify logo",src:Y.a,style:{width:30}}),i.a.createElement(q,{href:"http://localhost:8888/login"},"Log in to Spotify"))}}]),n}(a.Component);function V(){var e=Object(f.a)(["\n    display: flex;\n    flex-direction: ",";\n    justify-content: center;\n    align-items: center;\n    align-content: center;\n    margin: 50px;\n    margin-top: 50px;\n"]);return V=function(){return e},e}function X(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  margin: 50px;\n"]);return X=function(){return e},e}var Z=new y.a,ee=g.a.div(X()),ne=g.a.div(V(),(function(e){return e.isMobile?"column":"row"})),te=[{name:"good vibes",key:1,label:"good vibes"},{name:"chill",key:2,label:"chill"},{name:"bag",key:3,label:"bag"},{name:"hype",key:4,label:"hype"}],ae=function(e){function n(){var e;Object(l.a)(this,n);var t=(e=Object(c.a)(this,Object(u.a)(n).call(this))).getHashParams();return t.access_token&&Z.setAccessToken(t.access_token),e.state={loggedIn:!!t.access_token,userID:e.getUsername(),playlists:[],selectedPlaylistSongs:[],moods:new Map,chosenPlaylist:{},numCreated:0,isMobile:!1},e.handleMoodChange=e.handleMoodChange.bind(Object(d.a)(e)),e.handlePlaylistChange=e.handlePlaylistChange.bind(Object(d.a)(e)),e.getSavedSongs=e.getSavedSongs.bind(Object(d.a)(e)),e.updateWindowDimensions=e.updateWindowDimensions.bind(Object(d.a)(e)),e}return Object(h.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getPlaylists(),this.getSavedSongs(50,0),this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){window.innerWidth<725?this.setState({isMobile:!0}):this.setState({isMobile:!1})}},{key:"getHashParams",value:function(){for(var e,n={},t=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);e=t.exec(a);)n[e[1]]=decodeURIComponent(e[2]);return n}},{key:"getUsername",value:function(){var e=this;Z.getMe().then((function(n){e.setState({userID:n.id})}))}},{key:"getPlaylists",value:function(){var e=this;Z.getUserPlaylists().then((function(n){var t,a=!0,i=!1,r=void 0;try{for(var o,l=n.items[Symbol.iterator]();!(a=(o=l.next()).done);a=!0)t=o.value,e.setState((function(e){var n=e.playlists.concat({name:t.name,id:t.id,length:t.tracks.total});return console.log(t.tracks.total),{playlists:n}}))}catch(s){i=!0,r=s}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}}))}},{key:"getSavedSongs",value:function(e,n){var t=this;Z.getMySavedTracks({limit:e,offset:n}).then((function(a){var i,r=!0,o=!1,l=void 0;try{for(var s,c=a.items[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)i=s.value,t.setState((function(e){return{selectedPlaylistSongs:e.selectedPlaylistSongs.concat({name:i.track.name,uri:i.track.uri,id:i.track.id})}}))}catch(u){o=!0,l=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw l}}t.state.selectedPlaylistSongs.length<a.total&&t.getSavedSongs(e,n+e)}))}},{key:"getPlaylistSongs",value:function(e){for(var n=this,t=this.state.playlists.find((function(n){return n.id===e})),a=Math.ceil(t.length/100),i=[],r=0;r<a;r++)i.push(e);Promise.all(i.map((function(e,n){return Z.getPlaylistTracks("",e,{offset:100*n})}))).then((function(e){var t,a,i=!0,r=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){a=l.value;var c=!0,u=!1,d=void 0;try{for(var h,f=a.items[Symbol.iterator]();!(c=(h=f.next()).done);c=!0)t=h.value,n.setState((function(e){return{selectedPlaylistSongs:e.selectedPlaylistSongs.concat({name:t.track.name,uri:t.track.uri,id:t.track.id})}}))}catch(g){u=!0,d=g}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(g){r=!0,o=g}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}n.sortSongs()}))}},{key:"sortSongs",value:function(){var e,n=this,t=[[]],a=0,i=!0,r=!1,o=void 0;try{for(var l,s=this.state.selectedPlaylistSongs[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)e=l.value,100===t[a].length&&(a+=1,t.push([])),t[a].push(e.id)}catch(c){r=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}Promise.all(t.map((function(e){return Z.getAudioFeaturesForTracks(e)}))).then((function(e){var t,a,i;console.log(e);var r=[[]],o=[[]],l=[[]],s=[[]],u=!0,d=!1,h=void 0;try{for(var f,g=e[Symbol.iterator]();!(u=(f=g.next()).done);u=!0){a=f.value;var m=!0,y=!1,p=void 0;try{for(var v,b=a.audio_features[Symbol.iterator]();!(m=(v=b.next()).done);m=!0)"chill"===(i=(t=v.value).energy>.8||t.danceability>.8?"hype":t.energy>.65&&t.danceability>.5&&t.valence>.4?"good vibes":t.valence<.5&&t.energy<.5?"bag":"chill")?(100===r[r.length-1].length&&r.push([]),r[r.length-1].push(t.uri)):"good vibes"===i?(100===l[l.length-1].length&&l.push([]),l[l.length-1].push(t.uri)):"bag"===i?(100===s[s.length-1].length&&s.push([]),s[s.length-1].push(t.uri)):"hype"===i&&(100===o[o.length-1].length&&o.push([]),o[o.length-1].push(t.uri))}catch(c){y=!0,p=c}finally{try{m||null==b.return||b.return()}finally{if(y)throw p}}}}catch(c){d=!0,h=c}finally{try{u||null==g.return||g.return()}finally{if(d)throw h}}var k=[],S=!0,j=!1,x=void 0;try{for(var O,C=n.state.moods[Symbol.iterator]();!(S=(O=C.next()).done);S=!0)(i=O.value)[1]&&k.push(i[0])}catch(c){j=!0,x=c}finally{try{S||null==C.return||C.return()}finally{if(j)throw x}}k.map((function(e){Z.createPlaylist(n.state.userID,{name:e+" songs of "+n.state.chosenPlaylist.name,description:"Created by mood-sort from "+n.state.chosenPlaylist.name+" playlist"}).then((function(n){"bag"===e&&0!==s[0].length?s.map((function(e){Z.addTracksToPlaylist("",n.id,e)})):"hype"===e&&0!==o[0].length?o.map((function(e){Z.addTracksToPlaylist("",n.id,e)})):"good vibes"===e&&0!==l[0].length?l.map((function(e){Z.addTracksToPlaylist("",n.id,e)})):"chill"===e&&0!==r[0].length&&r.map((function(e){Z.addTracksToPlaylist("",n.id,e)}))}))}))}))}},{key:"handleMoodChange",value:function(e){var n=e.target.name,t=e.target.checked;this.setState((function(e){return{moods:e.moods.set(n,t)}}))}},{key:"handlePlaylistChange",value:function(e){var n=e.target,t=n.options,a=n.selectedIndex;this.setState({chosenPlaylist:{name:t[a].innerHTML,id:e.target.value}})}},{key:"goButtonClicked",value:function(){"liked"===this.state.chosenPlaylist.id?this.sortSongs():(this.setState({selectedPlaylistSongs:[]}),this.getPlaylistSongs(this.state.chosenPlaylist.id))}},{key:"render",value:function(){var e=this;return this.state.loggedIn?i.a.createElement(ee,{className:"App"},i.a.createElement(x,{loggedIn:!0}),i.a.createElement(ne,{isMobile:this.state.isMobile},i.a.createElement(F,{titles:this.state.playlists,handlePlaylistChange:this.handlePlaylistChange,value:this.state.chosenPlaylist.id}),i.a.createElement(N,{moods:te,handleMoodChange:this.handleMoodChange,checkedItems:this.state.moods})),i.a.createElement(R,{onClick:function(){return e.goButtonClicked()}})):i.a.createElement(ee,{className:"App"},i.a.createElement(x,{loggedIn:!1}),i.a.createElement(Q,null))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.1b21bfb8.chunk.js.map